(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-646616ac"],{"18a1":function(e,a,t){"use strict";var n=t("9761"),i=t.n(n);i.a},"45a2":function(e,a,t){"use strict";t.d(a,"a",function(){return i}),t.d(a,"d",function(){return l}),t.d(a,"b",function(){return r}),t.d(a,"e",function(){return s}),t.d(a,"c",function(){return o});var n=t("b775");function i(e){return Object(n["a"])({method:"post",url:"/page/add",data:e})}function l(e){return Object(n["a"])({method:"post",url:"/page/list",params:e})}function r(e){return Object(n["a"])({method:"delete",url:"/page/"+e})}function s(e){return Object(n["a"])({method:"post",url:"/page/update",data:e})}function o(e){return Object(n["a"])({method:"get",url:"/page/cascader",params:{projectId:e}})}},4668:function(e,a,t){"use strict";var n=function(){var e=this,a=e.$createElement,t=e._self._c||a;return t("el-container",{staticStyle:{height:"100%"}},[t("el-container",[t("el-header",{attrs:{height:"50px"}},[t("el-popover",{attrs:{placement:"right",trigger:"click"}},[t("mobile-inspector",{staticStyle:{width:"1200px",height:"650px"},attrs:{"canvas-id":"page-canvas","page-type":e.savePageForm.type,"window-info":e.windowInfo,"window-hierarchy":e.savePageForm.windowHierarchy,"tree-loading":!1}}),e._v(" "),t("el-button",{attrs:{slot:"reference",icon:"el-icon-search"},slot:"reference"},[e._v(e._s(e.pageType+" - Inspector"))])],1),e._v(" "),t("el-button",{on:{click:function(a){return e.$router.push({name:"AddPageCategory"})}}},[e._v("添加分类")]),e._v(" "),t("el-select",{attrs:{clearable:"",filterable:"",placeholder:"选择分类"},on:{"visible-change":e.pageCategorySelectChange},model:{value:e.savePageForm.categoryId,callback:function(a){e.$set(e.savePageForm,"categoryId",a)},expression:"savePageForm.categoryId"}},e._l(e.pageCategoryList,function(e){return t("el-option",{key:e.id,attrs:{value:e.id,label:e.name}})}),1),e._v(" "),t("span",{staticClass:"required",staticStyle:{"margin-left":"10px"}}),t("el-input",{staticStyle:{width:"200px"},attrs:{clearable:"",placeholder:"page名"},model:{value:e.savePageForm.name,callback:function(a){e.$set(e.savePageForm,"name",a)},expression:"savePageForm.name"}}),e._v(" "),t("el-button",{attrs:{type:"primary"},on:{click:e.savePage}},[e._v("保 存")])],1),e._v(" "),t("el-main",[t("el-form",{attrs:{"label-width":"80px"}},[t("el-form-item",{attrs:{label:"描述"}},[t("el-input",{attrs:{type:"textarea",autosize:{minRows:1},clearable:""},model:{value:e.savePageForm.description,callback:function(a){e.$set(e.savePageForm,"description",a)},expression:"savePageForm.description"}})],1),e._v(" "),t("el-form-item",{attrs:{label:"元素"}},[t("el-button",{staticStyle:{"margin-bottom":"5px"},on:{click:e.addElement}},[e._v("+")]),e._v(" "),t("el-table",{attrs:{data:e.savePageForm.elements,border:""}},[t("el-table-column",{attrs:{align:"center",label:"WebElement"},scopedSlots:e._u([{key:"default",fn:function(a){var n=a.row;return[t("el-input",{attrs:{clearable:""},model:{value:n.name,callback:function(a){e.$set(n,"name","string"===typeof a?a.trim():a)},expression:"row.name"}})]}}])}),e._v(" "),t("el-table-column",{attrs:{align:"center",label:"定位方式"},scopedSlots:e._u([{key:"default",fn:function(a){var n=a.row;return[t("el-cascader",{staticStyle:{width:"100%"},attrs:{options:e.findBys,props:{expandTrigger:"hover"}},model:{value:n.findBy,callback:function(a){e.$set(n,"findBy",a)},expression:"row.findBy"}})]}}])}),e._v(" "),t("el-table-column",{attrs:{align:"center",label:"值"},scopedSlots:e._u([{key:"default",fn:function(a){var n=a.row;return[t("image-input",{model:{value:n.value,callback:function(a){e.$set(n,"value",a)},expression:"row.value"}})]}}])}),e._v(" "),t("el-table-column",{attrs:{align:"center",label:"描述"},scopedSlots:e._u([{key:"default",fn:function(a){var n=a.row;return[t("el-input",{attrs:{type:"textarea"},model:{value:n.description,callback:function(a){e.$set(n,"description",a)},expression:"row.description"}})]}}])}),e._v(" "),t("el-table-column",{attrs:{align:"center",label:"操作",width:"150"},scopedSlots:e._u([{key:"default",fn:function(a){return[t("el-button",{directives:[{name:"clipboard",rawName:"v-clipboard:copy",value:e.savePageForm.name+"_"+a.row.name,expression:"savePageForm.name + '_' + scope.row.name",arg:"copy"},{name:"clipboard",rawName:"v-clipboard:success",value:e.onCopy,expression:"onCopy",arg:"success"}]},[e._v("引用")]),e._v(" "),t("el-button",{on:{click:function(t){return e.delElement(a.$index)}}},[e._v("删除")])]}}])})],1)],1),e._v(" "),t("el-form-item",{attrs:{label:"By"}},[t("el-button",{staticStyle:{"margin-bottom":"5px"},on:{click:e.addBy}},[e._v("+")]),e._v(" "),t("el-table",{attrs:{data:e.savePageForm.bys,border:""}},[t("el-table-column",{attrs:{align:"center",label:"By"},scopedSlots:e._u([{key:"default",fn:function(a){var n=a.row;return[t("el-input",{attrs:{clearable:""},model:{value:n.name,callback:function(a){e.$set(n,"name","string"===typeof a?a.trim():a)},expression:"row.name"}})]}}])}),e._v(" "),t("el-table-column",{attrs:{align:"center",label:"定位方式"},scopedSlots:e._u([{key:"default",fn:function(a){var n=a.row;return[t("el-cascader",{staticStyle:{width:"100%"},attrs:{options:e.bys,props:{expandTrigger:"hover"}},model:{value:n.findBy,callback:function(a){e.$set(n,"findBy",a)},expression:"row.findBy"}})]}}])}),e._v(" "),t("el-table-column",{attrs:{align:"center",label:"值"},scopedSlots:e._u([{key:"default",fn:function(a){var n=a.row;return[t("image-input",{model:{value:n.value,callback:function(a){e.$set(n,"value",a)},expression:"row.value"}})]}}])}),e._v(" "),t("el-table-column",{attrs:{align:"center",label:"描述"},scopedSlots:e._u([{key:"default",fn:function(a){var n=a.row;return[t("el-input",{attrs:{type:"textarea"},model:{value:n.description,callback:function(a){e.$set(n,"description",a)},expression:"row.description"}})]}}])}),e._v(" "),t("el-table-column",{attrs:{align:"center",label:"操作",width:"150"},scopedSlots:e._u([{key:"default",fn:function(a){return[t("el-button",{directives:[{name:"clipboard",rawName:"v-clipboard:copy",value:e.savePageForm.name+"_"+a.row.name,expression:"savePageForm.name + '_' + scope.row.name",arg:"copy"},{name:"clipboard",rawName:"v-clipboard:success",value:e.onCopy,expression:"onCopy",arg:"success"}]},[e._v("引用")]),e._v(" "),t("el-button",{on:{click:function(t){return e.delBy(a.$index)}}},[e._v("删除")])]}}])})],1)],1)],1),e._v(" "),t("el-row",{attrs:{gutter:10}},[t("el-col",{attrs:{span:12}},[t("el-form",{attrs:{"label-width":"80px"}},[t("el-form-item",{attrs:{label:"图片Path"}},[t("el-input",{attrs:{clearable:"",disabled:e.isAdd},model:{value:e.savePageForm.imgPath,callback:function(a){e.$set(e.savePageForm,"imgPath",a)},expression:"savePageForm.imgPath"}})],1),e._v(" "),t("el-form-item",{attrs:{label:"布局"}},[t("el-input",{attrs:{clearable:"",disabled:e.isAdd},model:{value:e.savePageForm.windowHierarchy,callback:function(a){e.$set(e.savePageForm,"windowHierarchy",a)},expression:"savePageForm.windowHierarchy"}})],1),e._v(" "),t("el-form-item",{attrs:{label:"设备id"}},[t("el-input",{attrs:{clearable:"",disabled:e.isAdd},model:{value:e.savePageForm.deviceId,callback:function(a){e.$set(e.savePageForm,"deviceId",a)},expression:"savePageForm.deviceId"}})],1)],1)],1),e._v(" "),t("el-col",{attrs:{span:12}},[t("el-form",{attrs:{"label-width":"100px"}},[t("el-form-item",{attrs:{label:"window高"}},[t("el-input",{attrs:{clearable:"",disabled:e.isAdd},model:{value:e.savePageForm.windowHeight,callback:function(a){e.$set(e.savePageForm,"windowHeight",a)},expression:"savePageForm.windowHeight"}})],1),e._v(" "),t("el-form-item",{attrs:{label:"window宽"}},[t("el-input",{attrs:{clearable:"",disabled:e.isAdd},model:{value:e.savePageForm.windowWidth,callback:function(a){e.$set(e.savePageForm,"windowWidth",a)},expression:"savePageForm.windowWidth"}})],1),e._v(" "),t("el-form-item",{attrs:{label:"window方向"}},[t("el-input",{attrs:{clearable:"",disabled:e.isAdd},model:{value:e.savePageForm.windowOrientation,callback:function(a){e.$set(e.savePageForm,"windowOrientation",a)},expression:"savePageForm.windowOrientation"}})],1)],1)],1)],1)],1)],1)],1)},i=[],l=t("45a2"),r=t("c405"),s=t("e1f1"),o=t("8325"),c=t("ab2e"),u={directives:{clipboard:o["a"]},props:{isAdd:Boolean},components:{MobileInspector:s["a"],ImageInput:c["a"]},data:function(){return{savePageForm:{id:void 0,name:"",projectId:this.$store.state.project.id,type:void 0,categoryId:void 0,description:"",imgPath:"",imgUrl:"",windowHeight:void 0,windowWidth:void 0,windowOrientation:void 0,deviceId:void 0,windowHierarchy:"",elements:[],bys:[]},pageCategoryList:[]}},computed:{windowInfo:function(){return{windowWidth:this.savePageForm.windowWidth,windowHeight:this.savePageForm.windowHeight,windowOrientation:this.savePageForm.windowOrientation,imgUrl:this.savePageForm.imgUrl}},pageType:function(){var e=this.savePageForm.type;return 1===e?"Android Native":2===e?"iOS Native":"Web"},findBys:function(){var e=[{value:"@AndroidFindBy",label:"AndroidFindBy",children:[{value:"uiAutomator",label:"uiAutomator"},{value:"accessibility",label:"accessibility"},{value:"id",label:"id"},{value:"xpath",label:"xpath"}]},{value:"@iOSXCUITFindBy",label:"iOSFindBy",children:[{value:"iOSClassChain",label:"iOSClassChain"},{value:"iOSNsPredicate",label:"iOSNsPredicate"},{value:"accessibility",label:"accessibility"},{value:"id",label:"id"},{value:"xpath",label:"xpath"}]},{value:"@FindBy",label:"WebFindBy",children:[{value:"id",label:"id"},{value:"name",label:"name"},{value:"className",label:"className"},{value:"css",label:"css"},{value:"tagName",label:"tagName"},{value:"linkText",label:"linkText"},{value:"partialLinkText",label:"partialLinkText"},{value:"xpath",label:"xpath"}]}],a=this.savePageForm.type;return 1===a?e.splice(1,2):2===a?(e.splice(0,1),e.splice(1,1)):e.splice(0,2),e},bys:function(){var e=[{value:"MobileBy",label:"MobileBy",children:[{value:"id",label:"id"},{value:"AccessibilityId",label:"AccessibilityId"},{value:"xpath",label:"xpath"},{value:"AndroidUIAutomator",label:"AndroidUIAutomator"},{value:"iOSClassChain",label:"iOSClassChain"},{value:"iOSNsPredicateString",label:"iOSNsPredicateString"},{value:"image",label:"image"},{value:"className",label:"className"},{value:"name",label:"name"},{value:"cssSelector",label:"cssSelector"},{value:"linkText",label:"linkText"},{value:"partialLinkText",label:"partialLinkText"},{value:"tagName",label:"tagName"}]}];return e}},created:function(){var e=this;this.fetchPageCategoryList(),this.isAdd?setTimeout(function(){e.savePageForm=e.$route.params},100):Object(l["d"])({id:this.$route.params.pageId}).then(function(a){e.savePageForm=a.data[0]})},methods:{onCopy:function(e){this.$notify.success(e.text+"复制成功")},savePageSuccess:function(e){var a=this;this.$notify.success(e),this.isAdd&&(this.$store.dispatch("tagsView/delView",this.$store.state.tagsView.visitedViews.filter(function(e){return e.path===a.$route.path})[0]),this.$router.back())},savePage:function(){var e=this;this.isAdd?Object(l["a"])(this.savePageForm).then(function(a){e.savePageSuccess(a.msg)}):Object(l["e"])(this.savePageForm).then(function(a){e.savePageSuccess(a.msg)})},pageCategorySelectChange:function(e){e&&this.fetchPageCategoryList()},fetchPageCategoryList:function(){var e=this;Object(r["c"])({projectId:this.$store.state.project.id,type:1}).then(function(a){e.pageCategoryList=a.data})},addElement:function(){this.savePageForm.elements.push({name:"",findBy:[],value:""})},addBy:function(){this.savePageForm.bys.push({name:"",findBy:[],value:""})},delElement:function(e){this.savePageForm.elements.splice(e,1)},delBy:function(e){this.savePageForm.bys.splice(e,1)}}},d=u,v=(t("18a1"),t("2877")),m=Object(v["a"])(d,n,i,!1,null,"e9fc7470",null);a["a"]=m.exports},9761:function(e,a,t){},ab2e:function(e,a,t){"use strict";var n=function(){var e=this,a=e.$createElement,t=e._self._c||a;return t("span",[e.isBase64Png?t("el-image",{staticStyle:{width:"100px"},attrs:{src:e.src,"preview-src-list":[e.src]}}):e._e(),e._v(" "),e.isBase64Png?t("el-input",{staticStyle:{width:"100px"},attrs:{clearable:""},nativeOn:{paste:function(a){return e.onpaste(a)}},model:{value:e.currentValue,callback:function(a){e.currentValue="string"===typeof a?a.trim():a},expression:"currentValue"}}):e._e(),e._v(" "),e.isBase64Png?e._e():t("el-input",{attrs:{type:"textarea",autosize:{minRows:1,maxRows:10}},nativeOn:{paste:function(a){return e.onpaste(a)}},model:{value:e.currentValue,callback:function(a){e.currentValue="string"===typeof a?a.trim():a},expression:"currentValue"}})],1)},i=[],l=(t("4917"),t("f559"),t("c5f6"),{name:"ImageInput",props:{value:[String,Number]},data:function(){return{base64PngSrcPrefix:"data:image/png;base64,",base64PngPrefix:"iVBORw0KGgoAAAANSUhEUgAA",currentValue:this.value}},computed:{isBase64Png:function(){return!!this.currentValue&&this.currentValue.startsWith(this.base64PngPrefix)},src:function(){return this.base64PngSrcPrefix+this.currentValue}},watch:{value:function(e){this.currentValue=e},currentValue:function(e){this.$emit("input",e)}},methods:{onpaste:function(e){var a=this;if(e.clipboardData&&e.clipboardData.items){var t=e.clipboardData.items[0];if(t&&"file"===t.kind&&t.type.match(/^image\//i)){console.log("paste img to base64");var n=t.getAsFile(),i=new FileReader;i.onload=function(e){a.currentValue=e.target.result.substring(22)},i.readAsDataURL(n)}}}}}),r=l,s=t("2877"),o=Object(s["a"])(r,n,i,!1,null,null,null);a["a"]=o.exports},c405:function(e,a,t){"use strict";t.d(a,"c",function(){return i}),t.d(a,"a",function(){return l}),t.d(a,"b",function(){return r});var n=t("b775");function i(e){return Object(n["a"])({method:"post",url:"/category/list",params:e})}function l(e){return Object(n["a"])({method:"post",url:"/category/add",data:e})}function r(e){return Object(n["a"])({method:"delete",url:"/category/"+e})}},f346:function(e,a,t){"use strict";t.r(a);var n=function(){var e=this,a=e.$createElement,t=e._self._c||a;return t("save-page",{attrs:{"is-add":!0}})},i=[],l=t("4668"),r={name:"AddPage",components:{SavePage:l["a"]}},s=r,o=t("2877"),c=Object(o["a"])(s,n,i,!1,null,null,null);a["default"]=c.exports},f559:function(e,a,t){"use strict";var n=t("5ca1"),i=t("9def"),l=t("d2c8"),r="startsWith",s=""[r];n(n.P+n.F*t("5147")(r),"String",{startsWith:function(e){var a=l(this,e,r),t=i(Math.min(arguments.length>1?arguments[1]:void 0,a.length)),n=String(e);return s?s.call(a,n,t):a.slice(t,t+n.length)===n}})}}]);