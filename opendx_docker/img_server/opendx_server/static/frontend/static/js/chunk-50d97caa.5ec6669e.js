(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-50d97caa"],{8121:function(t,e,r){"use strict";r.d(e,"a",function(){return n}),r.d(e,"f",function(){return s}),r.d(e,"e",function(){return a}),r.d(e,"c",function(){return u}),r.d(e,"d",function(){return c}),r.d(e,"b",function(){return o});var i=r("b775");function n(t){return Object(i["a"])({method:"post",url:"/action/add",data:t})}function s(t){return Object(i["a"])({method:"post",url:"/action/update",data:t})}function a(t){return Object(i["a"])({method:"post",url:"/action/list",params:t})}function u(t){return Object(i["a"])({method:"delete",url:"/action/"+t})}function c(t,e){return Object(i["a"])({method:"get",url:"/action/cascader",params:{projectId:t,platform:e}})}function o(t){return Object(i["a"])({method:"post",url:"/action/debug",data:t})}},ab0a:function(t,e,r){"use strict";r.r(e);var i=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"app-container"},[r("save-test-suite",{attrs:{"is-add":!0}})],1)},n=[],s=r("e2a2"),a={name:"AddTestSuite",components:{SaveTestSuite:s["a"]}},u=a,c=r("2877"),o=Object(c["a"])(u,i,n,!1,null,null,null);e["default"]=o.exports},d023:function(t,e,r){"use strict";r.d(e,"a",function(){return n}),r.d(e,"b",function(){return s}),r.d(e,"d",function(){return a}),r.d(e,"c",function(){return u});var i=r("b775");function n(t){return Object(i["a"])({method:"post",url:"/testSuite/add",data:t})}function s(t){return Object(i["a"])({method:"delete",url:"/testSuite/"+t})}function a(t){return Object(i["a"])({method:"post",url:"/testSuite/update",data:t})}function u(t){return Object(i["a"])({method:"post",url:"/testSuite/list",params:t})}},e2a2:function(t,e,r){"use strict";var i=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("el-form",{attrs:{data:t.testSuite,"label-width":"100px"}},[r("el-form-item",{attrs:{label:"测试集名",rules:[{required:!0}]}},[r("el-input",{staticStyle:{width:"300px"},attrs:{clearable:""},model:{value:t.testSuite.name,callback:function(e){t.$set(t.testSuite,"name","string"===typeof e?e.trim():e)},expression:"testSuite.name"}})],1),t._v(" "),r("el-form-item",{attrs:{label:"描述"}},[r("el-input",{staticStyle:{width:"300px"},attrs:{type:"textarea",clearable:""},model:{value:t.testSuite.description,callback:function(e){t.$set(t.testSuite,"description","string"===typeof e?e.trim():e)},expression:"testSuite.description"}})],1),t._v(" "),r("el-form-item",{attrs:{label:"测试用例",rules:[{required:!0}]}},[r("el-tree",{ref:"tree",attrs:{data:t.treeData,"show-checkbox":"",props:{children:"children",label:"name"},"default-expand-all":"","node-key":"id","default-checked-keys":t.testSuite.testcases,"highlight-current":""}})],1),t._v(" "),r("el-form-item",[r("el-button",{attrs:{type:"primary"},on:{click:t.saveTestSuite}},[t._v("保 存")])],1)],1)},n=[],s=(r("7f7f"),r("d023")),a=r("8121"),u={props:{isAdd:Boolean},data:function(){return{testSuite:{id:void 0,name:"",description:"",testcases:[],projectId:this.$store.state.project.id},treeData:[]}},computed:{projectId:function(){return this.$store.state.project.id},platform:function(){return this.$store.state.project.platform}},created:function(){var t=this;this.fetchActionCascader(),this.isAdd?this.$route.params.name&&(this.testSuite=this.$route.params):Object(s["c"])({id:this.$route.params.testSuiteId}).then(function(e){t.testSuite=e.data[0]})},methods:{fetchActionCascader:function(){var t=this;Object(a["d"])(this.projectId,this.platform).then(function(e){var r=e.data.filter(function(t){return"测试用例"===t.name});t.treeData=r})},saveTestSuite:function(){var t=this;this.testSuite.testcases=this.$refs.tree.getCheckedKeys().filter(function(t){return t}),this.isAdd?Object(s["a"])(this.testSuite).then(function(e){t.saveTestSuiteSuccess(e.msg)}):Object(s["d"])(this.testSuite).then(function(e){t.saveTestSuiteSuccess(e.msg)})},saveTestSuiteSuccess:function(t){var e=this;this.$notify.success(t),this.$store.dispatch("tagsView/delView",this.$store.state.tagsView.visitedViews.filter(function(t){return t.path===e.$route.path})[0]),this.$router.back()}}},c=u,o=r("2877"),d=Object(o["a"])(c,i,n,!1,null,null,null);e["a"]=d.exports}}]);