(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-533816ee"],{"45a2":function(e,t,a){"use strict";a.d(t,"a",function(){return i}),a.d(t,"d",function(){return l}),a.d(t,"b",function(){return r}),a.d(t,"e",function(){return s}),a.d(t,"c",function(){return o});var n=a("b775");function i(e){return Object(n["a"])({method:"post",url:"/page/add",data:e})}function l(e){return Object(n["a"])({method:"post",url:"/page/list",params:e})}function r(e){return Object(n["a"])({method:"delete",url:"/page/"+e})}function s(e){return Object(n["a"])({method:"post",url:"/page/update",data:e})}function o(e){return Object(n["a"])({method:"get",url:"/page/cascader",params:{projectId:e}})}},4668:function(e,t,a){"use strict";var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-container",{staticStyle:{height:"100%"}},[a("el-container",[a("el-header",{attrs:{height:"50px"}},[a("el-popover",{attrs:{placement:"right",trigger:"click"}},[a("mobile-inspector",{staticStyle:{width:"1200px",height:"650px"},attrs:{"canvas-id":"page-canvas","window-info":e.windowInfo,"window-hierarchy":e.savePageForm.windowHierarchy,"tree-loading":!1}}),e._v(" "),a("el-button",{attrs:{slot:"reference",icon:"el-icon-search"},slot:"reference"},[e._v("Inspector")])],1),e._v(" "),a("el-button",{on:{click:function(t){return e.$router.push({name:"AddPageCategory"})}}},[e._v("添加分类")]),e._v(" "),a("el-select",{attrs:{clearable:"",filterable:"",placeholder:"选择分类"},on:{"visible-change":e.pageCategorySelectChange},model:{value:e.savePageForm.categoryId,callback:function(t){e.$set(e.savePageForm,"categoryId",t)},expression:"savePageForm.categoryId"}},e._l(e.pageCategoryList,function(e){return a("el-option",{key:e.id,attrs:{value:e.id,label:e.name}})}),1),e._v(" "),a("span",{staticClass:"required",staticStyle:{"margin-left":"10px"}}),a("el-input",{staticStyle:{width:"200px"},attrs:{clearable:"",placeholder:"page名"},model:{value:e.savePageForm.name,callback:function(t){e.$set(e.savePageForm,"name",t)},expression:"savePageForm.name"}}),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:e.savePage}},[e._v("保 存")])],1),e._v(" "),a("el-main",[a("el-form",{attrs:{"label-width":"80px"}},[a("el-form-item",{attrs:{label:"描述"}},[a("el-input",{attrs:{type:"textarea",autosize:{minRows:1},clearable:""},model:{value:e.savePageForm.description,callback:function(t){e.$set(e.savePageForm,"description",t)},expression:"savePageForm.description"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"元素"}},[a("el-button",{staticStyle:{"margin-bottom":"5px"},on:{click:e.addElement}},[e._v("+")]),e._v(" "),a("el-table",{attrs:{data:e.savePageForm.elements,border:""}},[a("el-table-column",{attrs:{align:"center",label:"WebElement"},scopedSlots:e._u([{key:"default",fn:function(t){var n=t.row;return[a("el-input",{attrs:{clearable:""},model:{value:n.name,callback:function(t){e.$set(n,"name","string"===typeof t?t.trim():t)},expression:"row.name"}})]}}])}),e._v(" "),a("el-table-column",{attrs:{align:"center",label:"定位方式"},scopedSlots:e._u([{key:"default",fn:function(t){var n=t.row;return[a("el-cascader",{staticStyle:{width:"100%"},attrs:{options:e.findBys,props:{expandTrigger:"hover"}},model:{value:n.findBy,callback:function(t){e.$set(n,"findBy",t)},expression:"row.findBy"}})]}}])}),e._v(" "),a("el-table-column",{attrs:{align:"center",label:"值"},scopedSlots:e._u([{key:"default",fn:function(t){var n=t.row;return[a("image-input",{model:{value:n.value,callback:function(t){e.$set(n,"value",t)},expression:"row.value"}})]}}])}),e._v(" "),a("el-table-column",{attrs:{align:"center",label:"描述"},scopedSlots:e._u([{key:"default",fn:function(t){var n=t.row;return[a("el-input",{attrs:{type:"textarea"},model:{value:n.description,callback:function(t){e.$set(n,"description",t)},expression:"row.description"}})]}}])}),e._v(" "),a("el-table-column",{attrs:{align:"center",label:"操作",width:"150"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{directives:[{name:"clipboard",rawName:"v-clipboard:copy",value:e.savePageForm.name+"_"+t.row.name,expression:"savePageForm.name + '_' + scope.row.name",arg:"copy"},{name:"clipboard",rawName:"v-clipboard:success",value:e.onCopy,expression:"onCopy",arg:"success"}]},[e._v("引用")]),e._v(" "),a("el-button",{on:{click:function(a){return e.delElement(t.$index)}}},[e._v("删除")])]}}])})],1)],1),e._v(" "),a("el-form-item",{attrs:{label:"By"}},[a("el-button",{staticStyle:{"margin-bottom":"5px"},on:{click:e.addBy}},[e._v("+")]),e._v(" "),a("el-table",{attrs:{data:e.savePageForm.bys,border:""}},[a("el-table-column",{attrs:{align:"center",label:"By"},scopedSlots:e._u([{key:"default",fn:function(t){var n=t.row;return[a("el-input",{attrs:{clearable:""},model:{value:n.name,callback:function(t){e.$set(n,"name","string"===typeof t?t.trim():t)},expression:"row.name"}})]}}])}),e._v(" "),a("el-table-column",{attrs:{align:"center",label:"定位方式"},scopedSlots:e._u([{key:"default",fn:function(t){var n=t.row;return[a("el-cascader",{staticStyle:{width:"100%"},attrs:{options:e.bys,props:{expandTrigger:"hover"}},model:{value:n.findBy,callback:function(t){e.$set(n,"findBy",t)},expression:"row.findBy"}})]}}])}),e._v(" "),a("el-table-column",{attrs:{align:"center",label:"值"},scopedSlots:e._u([{key:"default",fn:function(t){var n=t.row;return[a("image-input",{model:{value:n.value,callback:function(t){e.$set(n,"value",t)},expression:"row.value"}})]}}])}),e._v(" "),a("el-table-column",{attrs:{align:"center",label:"描述"},scopedSlots:e._u([{key:"default",fn:function(t){var n=t.row;return[a("el-input",{attrs:{type:"textarea"},model:{value:n.description,callback:function(t){e.$set(n,"description",t)},expression:"row.description"}})]}}])}),e._v(" "),a("el-table-column",{attrs:{align:"center",label:"操作",width:"150"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{directives:[{name:"clipboard",rawName:"v-clipboard:copy",value:e.savePageForm.name+"_"+t.row.name,expression:"savePageForm.name + '_' + scope.row.name",arg:"copy"},{name:"clipboard",rawName:"v-clipboard:success",value:e.onCopy,expression:"onCopy",arg:"success"}]},[e._v("引用")]),e._v(" "),a("el-button",{on:{click:function(a){return e.delBy(t.$index)}}},[e._v("删除")])]}}])})],1)],1)],1),e._v(" "),a("el-row",{attrs:{gutter:10}},[a("el-col",{attrs:{span:12}},[a("el-form",{attrs:{"label-width":"80px"}},[a("el-form-item",{attrs:{label:"图片Path"}},[a("el-input",{attrs:{clearable:"",disabled:e.isAdd},model:{value:e.savePageForm.imgPath,callback:function(t){e.$set(e.savePageForm,"imgPath",t)},expression:"savePageForm.imgPath"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"图片布局"}},[a("el-input",{attrs:{clearable:"",disabled:e.isAdd},model:{value:e.savePageForm.windowHierarchy,callback:function(t){e.$set(e.savePageForm,"windowHierarchy",t)},expression:"savePageForm.windowHierarchy"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"设备id"}},[a("el-input",{attrs:{clearable:"",disabled:e.isAdd},model:{value:e.savePageForm.deviceId,callback:function(t){e.$set(e.savePageForm,"deviceId",t)},expression:"savePageForm.deviceId"}})],1)],1)],1),e._v(" "),a("el-col",{attrs:{span:12}},[a("el-form",{attrs:{"label-width":"100px"}},[a("el-form-item",{attrs:{label:"window高"}},[a("el-input",{attrs:{clearable:"",disabled:e.isAdd},model:{value:e.savePageForm.windowHeight,callback:function(t){e.$set(e.savePageForm,"windowHeight",t)},expression:"savePageForm.windowHeight"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"window宽"}},[a("el-input",{attrs:{clearable:"",disabled:e.isAdd},model:{value:e.savePageForm.windowWidth,callback:function(t){e.$set(e.savePageForm,"windowWidth",t)},expression:"savePageForm.windowWidth"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"window方向"}},[a("el-input",{attrs:{clearable:"",disabled:e.isAdd},model:{value:e.savePageForm.windowOrientation,callback:function(t){e.$set(e.savePageForm,"windowOrientation",t)},expression:"savePageForm.windowOrientation"}})],1)],1)],1)],1)],1)],1)],1)},i=[],l=a("45a2"),r=a("c405"),s=a("e1f1"),o=a("8325"),c=a("ab2e"),u={directives:{clipboard:o["a"]},props:{isAdd:Boolean},components:{MobileInspector:s["a"],ImageInput:c["a"]},data:function(){return{savePageForm:{id:void 0,name:"",projectId:this.$store.state.project.id,categoryId:void 0,description:"",imgPath:"",imgUrl:"",windowHeight:void 0,windowWidth:void 0,windowOrientation:void 0,deviceId:void 0,windowHierarchy:"",elements:[],bys:[]},pageCategoryList:[]}},computed:{windowInfo:function(){return{windowWidth:this.savePageForm.windowWidth,windowHeight:this.savePageForm.windowHeight,windowOrientation:this.savePageForm.windowOrientation,imgUrl:this.savePageForm.imgUrl}},findBys:function(){var e=[{value:"@AndroidFindBy",label:"AndroidFindBy",children:[{value:"uiAutomator",label:"uiAutomator"},{value:"accessibility",label:"accessibility"},{value:"id",label:"id"},{value:"xpath",label:"xpath"}]},{value:"@iOSXCUITFindBy",label:"iOSFindBy",children:[{value:"iOSClassChain",label:"iOSClassChain"},{value:"iOSNsPredicate",label:"iOSNsPredicate"},{value:"accessibility",label:"accessibility"},{value:"id",label:"id"},{value:"xpath",label:"xpath"}]},{value:"@FindBy",label:"WebFindBy",children:[{value:"id",label:"id"},{value:"name",label:"name"},{value:"className",label:"className"},{value:"css",label:"css"},{value:"tagName",label:"tagName"},{value:"linkText",label:"linkText"},{value:"partialLinkText",label:"partialLinkText"},{value:"xpath",label:"xpath"}]}],t=this.$store.state.project.platform;return 1===t||3===t||4===t?e.splice(1,1):2===t?e.splice(0,1):e.splice(0,2),e},bys:function(){var e=[{value:"MobileBy",label:"MobileBy",children:[{value:"id",label:"id"},{value:"AccessibilityId",label:"AccessibilityId"},{value:"xpath",label:"xpath"},{value:"AndroidUIAutomator",label:"AndroidUIAutomator"},{value:"iOSClassChain",label:"iOSClassChain"},{value:"iOSNsPredicateString",label:"iOSNsPredicateString"},{value:"image",label:"image"},{value:"className",label:"className"},{value:"name",label:"name"},{value:"cssSelector",label:"cssSelector"},{value:"linkText",label:"linkText"},{value:"partialLinkText",label:"partialLinkText"},{value:"tagName",label:"tagName"}]}];return e}},created:function(){var e=this;this.fetchPageCategoryList(),this.isAdd?setTimeout(function(){e.savePageForm=e.$route.params},100):Object(l["d"])({id:this.$route.params.pageId}).then(function(t){e.savePageForm=t.data[0]})},methods:{onCopy:function(e){this.$notify.success(e.text+"复制成功")},savePageSuccess:function(e){var t=this;this.$notify.success(e),this.isAdd&&(this.$store.dispatch("tagsView/delView",this.$store.state.tagsView.visitedViews.filter(function(e){return e.path===t.$route.path})[0]),this.$router.back())},savePage:function(){var e=this;this.isAdd?Object(l["a"])(this.savePageForm).then(function(t){e.savePageSuccess(t.msg)}):Object(l["e"])(this.savePageForm).then(function(t){e.savePageSuccess(t.msg)})},pageCategorySelectChange:function(e){e&&this.fetchPageCategoryList()},fetchPageCategoryList:function(){var e=this;Object(r["c"])({projectId:this.$store.state.project.id,type:1}).then(function(t){e.pageCategoryList=t.data})},addElement:function(){this.savePageForm.elements.push({name:"",findBy:[],value:""})},addBy:function(){this.savePageForm.bys.push({name:"",findBy:[],value:""})},delElement:function(e){this.savePageForm.elements.splice(e,1)},delBy:function(e){this.savePageForm.bys.splice(e,1)}}},d=u,m=(a("9196"),a("2877")),v=Object(m["a"])(d,n,i,!1,null,"31e62605",null);t["a"]=v.exports},5275:function(e,t,a){},9196:function(e,t,a){"use strict";var n=a("5275"),i=a.n(n);i.a},ab2e:function(e,t,a){"use strict";var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("span",[e.isBase64Png?a("el-image",{staticStyle:{width:"100px"},attrs:{src:e.src,"preview-src-list":[e.src]}}):e._e(),e._v(" "),e.isBase64Png?a("el-input",{staticStyle:{width:"100px"},attrs:{clearable:""},nativeOn:{paste:function(t){return e.onpaste(t)}},model:{value:e.currentValue,callback:function(t){e.currentValue="string"===typeof t?t.trim():t},expression:"currentValue"}}):e._e(),e._v(" "),e.isBase64Png?e._e():a("el-input",{attrs:{type:"textarea",autosize:{minRows:1,maxRows:10}},nativeOn:{paste:function(t){return e.onpaste(t)}},model:{value:e.currentValue,callback:function(t){e.currentValue="string"===typeof t?t.trim():t},expression:"currentValue"}})],1)},i=[],l=(a("4917"),a("f559"),a("c5f6"),{name:"ImageInput",props:{value:[String,Number]},data:function(){return{base64PngSrcPrefix:"data:image/png;base64,",base64PngPrefix:"iVBORw0KGgoAAAANSUhEUgAA",currentValue:this.value}},computed:{isBase64Png:function(){return!!this.currentValue&&this.currentValue.startsWith(this.base64PngPrefix)},src:function(){return this.base64PngSrcPrefix+this.currentValue}},watch:{value:function(e){this.currentValue=e},currentValue:function(e){this.$emit("input",e)}},methods:{onpaste:function(e){var t=this;if(e.clipboardData&&e.clipboardData.items){var a=e.clipboardData.items[0];if(a&&"file"===a.kind&&a.type.match(/^image\//i)){console.log("paste img to base64");var n=a.getAsFile(),i=new FileReader;i.onload=function(e){t.currentValue=e.target.result.substring(22)},i.readAsDataURL(n)}}}}}),r=l,s=a("2877"),o=Object(s["a"])(r,n,i,!1,null,null,null);t["a"]=o.exports},c405:function(e,t,a){"use strict";a.d(t,"c",function(){return i}),a.d(t,"a",function(){return l}),a.d(t,"b",function(){return r});var n=a("b775");function i(e){return Object(n["a"])({method:"post",url:"/category/list",params:e})}function l(e){return Object(n["a"])({method:"post",url:"/category/add",data:e})}function r(e){return Object(n["a"])({method:"delete",url:"/category/"+e})}},f346:function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("save-page",{attrs:{"is-add":!0}})},i=[],l=a("4668"),r={name:"AddPage",components:{SavePage:l["a"]}},s=r,o=a("2877"),c=Object(o["a"])(s,n,i,!1,null,null,null);t["default"]=c.exports},f559:function(e,t,a){"use strict";var n=a("5ca1"),i=a("9def"),l=a("d2c8"),r="startsWith",s=""[r];n(n.P+n.F*a("5147")(r),"String",{startsWith:function(e){var t=l(this,e,r),a=i(Math.min(arguments.length>1?arguments[1]:void 0,t.length)),n=String(e);return s?s.call(t,n,a):t.slice(a,a+n.length)===n}})}}]);