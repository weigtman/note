(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-508c9c61"],{"3e31":function(e,t,r){"use strict";var i=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("el-form",{attrs:{data:e.driver,"label-width":"80px"}},[r("el-form-item",{attrs:{label:"version",rules:[{required:!0}]}},[r("el-input",{staticStyle:{width:"300px"},attrs:{clearable:""},model:{value:e.driver.version,callback:function(t){e.$set(e.driver,"version","string"===typeof t?t.trim():t)},expression:"driver.version"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"类型",rules:[{required:!0}]}},[r("el-radio-group",{model:{value:e.driver.type,callback:function(t){e.$set(e.driver,"type",t)},expression:"driver.type"}},e._l(e.driverType,function(t,i){return r("el-radio",{key:i,attrs:{label:t}},[e._v("\n        "+e._s(i)+"\n      ")])}),1)],1),e._v(" "),r("el-form-item",{attrs:{label:"上传"}},e._l(e.driver.files,function(t){return r("div",{key:t.platform},[r("el-upload",{attrs:{action:e.uploadUrl,limit:1,multiple:!1,"on-success":function(r,i,n){return e.onFileUploadSuccess(r,i,n,t)}}},[r("el-button",[e._v(e._s(1===t.platform?"windows":2===t.platform?"linux":"mac")+" - 点击上传")]),e._v("\n        "+e._s(t.filePath)+"\n      ")],1),e._v(" "),r("el-divider")],1)}),0),e._v(" "),r("el-form-item",{attrs:{label:"devices"}},[r("el-select",{staticStyle:{width:"100%"},attrs:{clearable:"",filterable:"",multiple:""},on:{"visible-change":e.deviceSelectChange},model:{value:e.driver.deviceIds,callback:function(t){e.$set(e.driver,"deviceIds",t)},expression:"driver.deviceIds"}},e._l(e.devices,function(t){return r("el-option",{key:t.id,attrs:{label:t.id,value:t.id}},[r("span",[e._v(e._s(t.id))]),e._v(" "),r("el-divider",{attrs:{direction:"vertical"}}),e._v(" "),r("span",[e._v(e._s(t.name))]),e._v(" "),r("el-divider",{attrs:{direction:"vertical"}}),e._v(" "),r("span",[e._v(e._s(t.systemVersion))])],1)}),1)],1),e._v(" "),r("el-form-item",[r("el-button",{attrs:{type:"primary"},on:{click:e.saveDriver}},[e._v("保 存")])],1)],1)},n=[],a=r("da26"),s=r("aa98"),c={props:{isAdd:Boolean},data:function(){return{driverType:{chromedriver:1},driver:{id:void 0,version:"",type:1,files:[{platform:1,filePath:""},{platform:2,filePath:""},{platform:3,filePath:""}],deviceIds:[]},devices:[],uploadUrl:"/upload/file/4"}},created:function(){var e=this;this.isAdd||Object(a["c"])({id:this.$route.params.driverId}).then(function(t){e.driver=t.data[0]})},methods:{deviceSelectChange:function(e){e&&this.fetDeviceList()},fetDeviceList:function(){var e=this;Object(s["b"])().then(function(t){e.devices=t.data})},onFileUploadSuccess:function(e,t,r,i){1===e.status?i.filePath=e.data.filePath:this.$message.error(e.msg)},saveDriverSuccess:function(e){var t=this;this.$notify.success(e),this.$store.dispatch("tagsView/delView",this.$store.state.tagsView.visitedViews.filter(function(e){return e.path===t.$route.path})[0]),this.$router.back()},saveDriver:function(){var e=this;this.isAdd?Object(a["a"])(this.driver).then(function(t){e.saveDriverSuccess(t.msg)}):Object(a["d"])(this.driver).then(function(t){e.saveDriverSuccess(t.msg)})}}},l=c,d=r("2877"),o=Object(d["a"])(l,i,n,!1,null,null,null);t["a"]=o.exports},"6e7b":function(e,t,r){"use strict";r.r(t);var i=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"app-container"},[r("save-driver",{attrs:{"is-add":!0}})],1)},n=[],a=r("3e31"),s={name:"AddDriver",components:{SaveDriver:a["a"]}},c=s,l=r("2877"),d=Object(l["a"])(c,i,n,!1,null,"fa008654",null);t["default"]=d.exports},aa98:function(e,t,r){"use strict";r.d(t,"b",function(){return n}),r.d(t,"a",function(){return a}),r.d(t,"c",function(){return s});var i=r("b775");function n(e){return Object(i["a"])({method:"post",url:"/device/list",params:e})}function a(e){return Object(i["a"])({method:"get",url:"/device/"+e+"/start"})}function s(e){return Object(i["a"])({method:"get",url:"/device/online/platform/"+e})}},da26:function(e,t,r){"use strict";r.d(t,"a",function(){return n}),r.d(t,"b",function(){return a}),r.d(t,"d",function(){return s}),r.d(t,"c",function(){return c});var i=r("b775");function n(e){return Object(i["a"])({method:"post",url:"/driver/add",data:e})}function a(e){return Object(i["a"])({method:"delete",url:"/driver/"+e})}function s(e){return Object(i["a"])({method:"post",url:"/driver/update",data:e})}function c(e){return Object(i["a"])({method:"post",url:"/driver/list",params:e})}}}]);