(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-27505890"],{1406:function(t,e,n){},"1c64":function(t,e,n){},"1cc6":function(t,e,n){"use strict";var a=n("1c64"),r=n.n(a);r.a},"319d":function(t,e,n){"use strict";var a=n("1406"),r=n.n(a);r.a},"333d":function(t,e,n){"use strict";var a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"pagination-container",class:{hidden:t.hidden}},[n("el-pagination",t._b({attrs:{background:t.background,"current-page":t.currentPage,"page-size":t.pageSize,layout:t.layout,"page-sizes":t.pageSizes,total:t.total},on:{"update:currentPage":function(e){t.currentPage=e},"update:current-page":function(e){t.currentPage=e},"update:pageSize":function(e){t.pageSize=e},"update:page-size":function(e){t.pageSize=e},"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange}},"el-pagination",t.$attrs,!1))],1)},r=[];n("c5f6");Math.easeInOutQuad=function(t,e,n,a){return t/=a/2,t<1?n/2*t*t+e:(t--,-n/2*(t*(t-2)-1)+e)};var o=function(){return window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||function(t){window.setTimeout(t,1e3/60)}}();function i(t){document.documentElement.scrollTop=t,document.body.parentNode.scrollTop=t,document.body.scrollTop=t}function s(){return document.documentElement.scrollTop||document.body.parentNode.scrollTop||document.body.scrollTop}function l(t,e,n){var a=s(),r=t-a,l=20,c=0;e="undefined"===typeof e?500:e;var u=function t(){c+=l;var s=Math.easeInOutQuad(c,a,r,e);i(s),c<e?o(t):n&&"function"===typeof n&&n()};u()}var c={name:"Pagination",props:{total:{required:!0,type:Number},page:{type:Number,default:1},limit:{type:Number,default:20},pageSizes:{type:Array,default:function(){return[10,20,30,50]}},layout:{type:String,default:"total, sizes, prev, pager, next, jumper"},background:{type:Boolean,default:!0},autoScroll:{type:Boolean,default:!0},hidden:{type:Boolean,default:!1}},computed:{currentPage:{get:function(){return this.page},set:function(t){this.$emit("update:page",t)}},pageSize:{get:function(){return this.limit},set:function(t){this.$emit("update:limit",t)}}},methods:{handleSizeChange:function(t){this.$emit("pagination",{page:this.currentPage,limit:t}),this.autoScroll&&l(0,800)},handleCurrentChange:function(t){this.$emit("pagination",{page:t,limit:this.pageSize}),this.autoScroll&&l(0,800)}}},u=c,d=(n("1cc6"),n("2877")),p=Object(d["a"])(u,a,r,!1,null,"f3b72548",null);e["a"]=p.exports},"90c2":function(t,e,n){"use strict";n.d(e,"a",function(){return r}),n.d(e,"b",function(){return o}),n.d(e,"c",function(){return i}),n.d(e,"d",function(){return s});var a=n("b775");function r(t){return Object(a["a"])({method:"get",url:"/testTask/commit",params:t})}function o(t){return Object(a["a"])({method:"delete",url:"/testTask/"+t})}function i(t){return Object(a["a"])({method:"post",url:"/testTask/list",params:t})}function s(t){return Object(a["a"])({method:"get",url:"/testTask/"+t+"/summary"})}},ca50:function(t,e,n){"use strict";n.d(e,"b",function(){return r}),n.d(e,"a",function(){return o});var a=n("b775");function r(t){return Object(a["a"])({method:"post",url:"/deviceTestTask/list",params:t})}function o(t){return Object(a["a"])({method:"delete",url:"/deviceTestTask/"+t})}},da2c:function(t,e,n){"use strict";n.r(e);var a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"app-container"},[n("div",[n("el-button",{staticStyle:{"margin-bottom":"10px"},on:{click:t.fetchTestTaskList}},[t._v("刷新")]),t._v(" "),n("el-table",{attrs:{data:t.testTaskList,border:"",fit:""}},[n("el-table-column",{attrs:{label:"提交时间",align:"center",width:"200","show-overflow-tooltip":""},scopedSlots:t._u([{key:"default",fn:function(e){var n=e.row;return[t._v("\n          "+t._s(n.creatorNickName+" "+n.commitTime)+"\n        ")]}}])}),t._v(" "),n("el-table-column",{attrs:{label:"完成时间",prop:"finishTime",align:"center",width:"150","show-overflow-tooltip":""}}),t._v(" "),n("el-table-column",{attrs:{label:"测试计划",align:"center","min-width":"150","show-overflow-tooltip":""},scopedSlots:t._u([{key:"default",fn:function(e){var n=e.row;return[t._v("\n          "+t._s(n.testPlan.name)+"\n        ")]}}])}),t._v(" "),n("el-table-column",{attrs:{label:"通过",align:"center",width:"100"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n          "+t._s(0===e.row.status?"-":e.row.passCaseCount)+"\n        ")]}}])}),t._v(" "),n("el-table-column",{attrs:{label:"失败",align:"center",width:"100"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n          "+t._s(0===e.row.status?"-":e.row.failCaseCount)+"\n        ")]}}])}),t._v(" "),n("el-table-column",{attrs:{label:"跳过",align:"center",width:"100"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n          "+t._s(0===e.row.status?"-":e.row.skipCaseCount)+"\n        ")]}}])}),t._v(" "),n("el-table-column",{attrs:{label:"状态",align:"center",width:"100"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n          "+t._s(0===e.row.status?"未完成":"已完成")+"\n        ")]}}])}),t._v(" "),n("el-table-column",{attrs:{label:"操作",width:"280",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){var a=e.row;return[n("el-button",{attrs:{type:"primary"},on:{click:function(e){return t.onDeviceTestTaskBtnClick(a)}}},[t._v("查看进度")]),t._v(" "),n("el-button",{attrs:{type:"success",disabled:1!==a.status},on:{click:function(e){return t.goToReportPage(a)}}},[t._v("查看报告")]),t._v(" "),n("el-button",{staticClass:"el-icon-delete",attrs:{type:"danger",disabled:1===a.status},on:{click:function(e){return t.deleteTestTask(a)}}})]}}])})],1)],1),t._v(" "),n("div",[n("pagination",{directives:[{name:"show",rawName:"v-show",value:t.total>0,expression:"total>0"}],attrs:{total:t.total,page:t.queryTestTaskListForm.pageNum,limit:t.queryTestTaskListForm.pageSize},on:{"update:page":function(e){return t.$set(t.queryTestTaskListForm,"pageNum",e)},"update:limit":function(e){return t.$set(t.queryTestTaskListForm,"pageSize",e)},pagination:t.fetchTestTaskList}})],1),t._v(" "),n("el-drawer",{attrs:{"with-header":!1,visible:t.showDrawer,direction:"rtl",size:"95%"},on:{"update:visible":function(e){t.showDrawer=e}}},[n("el-drawer",{attrs:{size:"60%","with-header":!1,"append-to-body":!0,visible:t.innerDrawer},on:{"update:visible":function(e){t.innerDrawer=e}}},[n("codemirror",{attrs:{options:t.cmOptions},model:{value:t.codemirrorContent,callback:function(e){t.codemirrorContent=e},expression:"codemirrorContent"}})],1),t._v(" "),n("div",{staticStyle:{padding:"5px"}},[n("el-button",{staticStyle:{"margin-bottom":"5px"},attrs:{size:"mini"},on:{click:function(e){return t.fetchDeviceTestTask(t.testTaskIdInDrawer)}}},[t._v("刷新")]),t._v(" "),n("el-table",{attrs:{data:t.deviceTestTaskList,border:""}},[n("el-table-column",{attrs:{label:"操作",width:"80",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){var a=e.row;return[n("el-button",{staticClass:"el-icon-delete",attrs:{type:"danger",size:"mini",disabled:!(0===a.status||-1===a.status)},on:{click:function(e){return t.deleteDeviceTestTask(a)}}})]}}])}),t._v(" "),n("el-table-column",{attrs:{label:"执行进度",align:"center",width:"150"},scopedSlots:t._u([{key:"default",fn:function(e){var a=e.row;return[-1!=a.status?n("el-progress",{attrs:{type:"circle",percentage:t.deviceExecutePercent(a)}}):n("el-button",{attrs:{type:"text"},on:{click:function(e){return t.showCodemirror(a.errMsg)}}},[t._v("error")])]}}])}),t._v(" "),n("el-table-column",{attrs:{label:"设备id",align:"center",prop:"deviceId",width:"100","show-overflow-tooltip":""}}),t._v(" "),n("el-table-column",{attrs:{label:"code",align:"center",width:"60"},scopedSlots:t._u([{key:"default",fn:function(e){var a=e.row;return[a.code?n("el-button",{attrs:{type:"text"},on:{click:function(e){return t.showCodemirror(a.code)}}},[t._v("查看")]):t._e()]}}])}),t._v(" "),n("el-table-column",{attrs:{label:"开始时间",align:"center",prop:"startTime",width:"150","show-overflow-tooltip":""}}),t._v(" "),n("el-table-column",{attrs:{label:"结束时间",align:"center",prop:"endTime",width:"150","show-overflow-tooltip":""}}),t._v(" "),n("el-table-column",{attrs:{label:"测试用例",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){var a=e.row;return[n("el-table",{attrs:{data:a.testcases,border:"","max-height":"400px"}},[n("el-table-column",{attrs:{label:"用例名",align:"center",prop:"name",width:"150","show-overflow-tooltip":""}}),t._v(" "),n("el-table-column",{attrs:{label:"执行状态",align:"center",width:"100"},scopedSlots:t._u([{key:"default",fn:function(e){var a=e.row;return[0===a.status?n("div",[n("el-tag",{attrs:{type:"danger"}},[t._v("失败")])],1):1===a.status?n("div",[n("el-tag",{attrs:{type:"success"}},[t._v("成功")])],1):2===a.status?n("div",[n("el-tag",{attrs:{type:"warning"}},[t._v("跳过")])],1):n("div",[t._v("\n                    -\n                  ")])]}}],null,!0)}),t._v(" "),n("el-table-column",{attrs:{label:"步骤",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){var a=e.row;return[n("el-table",{attrs:{data:a.steps,border:""}},[n("el-table-column",{attrs:{label:"#",prop:"number",align:"center",width:"50"}}),t._v(" "),n("el-table-column",{attrs:{label:"步骤名",prop:"name",align:"center","show-overflow-tooltip":""}}),t._v(" "),n("el-table-column",{attrs:{label:"开始时间",prop:"startTime",align:"center",width:"150","show-overflow-tooltip":""}}),t._v(" "),n("el-table-column",{attrs:{label:"结束时间",prop:"endTime",align:"center",width:"150","show-overflow-tooltip":""}}),t._v(" "),n("el-table-column",{attrs:{label:"耗时",align:"center",width:"100","show-overflow-tooltip":""},scopedSlots:t._u([{key:"default",fn:function(e){var n=e.row;return[t._v("\n                        "+t._s(n.endTime?parseInt(new Date(n.endTime)-new Date(n.startTime))/1e3+"秒":"-")+"\n                      ")]}}],null,!0)})],1)]}}],null,!0)})],1)]}}])})],1)],1)],1)],1)},r=[],o=n("90c2"),i=n("ca50"),s=n("333d"),l=(n("4ba6"),n("8c2e"),{components:{Pagination:s["a"]},data:function(){return{showDrawer:!1,innerDrawer:!1,testTaskList:[],queryTestTaskListForm:{pageNum:1,pageSize:10,projectId:this.$store.state.project.id},total:0,testTaskIdInDrawer:void 0,deviceTestTaskList:[],codemirrorContent:"",cmOptions:{mode:"clike",theme:"base16-dark",lineNumbers:!0,line:!0,readOnly:!0}}},computed:{deviceExecutePercent:function(){return function(t){var e=t.testcases.length,n=t.testcases.filter(function(t){return void 0!==t.status&&null!==t.status}).length;return parseInt(n/e*100)}}},methods:{showCodemirror:function(t){this.codemirrorContent=t,this.innerDrawer=!0},goToReportPage:function(t){this.$router.push({name:"TestTaskReport",params:{testTaskId:t.id}})},fetchDeviceTestTask:function(t){var e=this;Object(i["b"])({testTaskId:t}).then(function(t){e.deviceTestTaskList=t.data})},fetchTestTaskList:function(){var t=this;Object(o["c"])(this.queryTestTaskListForm).then(function(e){t.testTaskList=e.data.data,t.total=e.data.total})},deleteTestTask:function(t){var e=this;this.$confirm("删除测试任务id: "+t.id,"提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){Object(o["b"])(t.id).then(function(t){e.$notify.success(t.msg),e.fetchTestTaskList()})})},deleteDeviceTestTask:function(t){var e=this;this.$confirm("删除"+t.deviceId+"测试任务","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){Object(i["a"])(t.id).then(function(n){e.$notify.success(n.msg),e.fetchDeviceTestTask(t.testTaskId)})})},onDeviceTestTaskBtnClick:function(t){this.showDrawer=!0,this.testTaskIdInDrawer=t.id,this.fetchDeviceTestTask(this.testTaskIdInDrawer)}},created:function(){this.fetchTestTaskList()}}),c=l,u=(n("319d"),n("2877")),d=Object(u["a"])(c,a,r,!1,null,null,null);e["default"]=d.exports}}]);